<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>QTS Demo</title>
<style>
  body { font-family: system-ui, sans-serif; background: #121212; color: #eee; padding: 20px; }
  h1 { color: #fff; }
  qts { display: block; white-space: pre; margin-bottom: 20px; }
  .qts-grid { display: grid; gap: 6px; }
  .qts-cell { padding: 6px 10px; border-radius: 6px; background: #1e1e1e; color: #eee; text-align: center; }
</style>
</head>
<body>

<h1>Hello World!</h1>

<qts>
grid h:2;w:3

<qts-content>
[Name];[Alter];[Status];
[LukoviÄ‡];[27];[Online];
</qts-content>

<qts-style>
coordinate h:1;w:* { font-weight:bold; background:#111; color:white; }
coordinate h:2;w:3 { color:lime; }
</qts-style>
</qts>

<script>
(function(){
  function parseQTS(qtsEl){
    const raw = qtsEl.innerHTML;

    // Grid
    const gridMatch = raw.match(/grid\s+h:(\d+);w:(\d+)/i);
    if(!gridMatch) return;
    const w = +gridMatch[2];

    // Content
    const contentMatch = raw.match(/<qts-content>([\s\S]*?)<\/qts-content>/i);
    if(!contentMatch) return;
    const rows = contentMatch[1].trim().split("\n").map(r=>r.split(";").map(c=>c.replace(/[\[\]]/g,"").trim()).filter(Boolean));

    // Grid erstellen
    const grid = document.createElement("div");
    grid.className = "qts-grid";
    grid.style.gridTemplateColumns = `repeat(${w},1fr)`;

    rows.forEach((row,y)=>{
      row.forEach((cell,x)=>{
        const div = document.createElement("div");
        div.className = `qts-cell h${y+1} w${x+1}`;
        div.textContent = cell;
        grid.appendChild(div);
      });
    });

    // Styles
    const styleMatch = raw.match(/<qts-style>([\s\S]*?)<\/qts-style>/i);
    if(styleMatch){
      const styleEl = document.createElement("style");
      styleEl.textContent = styleMatch[1].replace(/coordinate\s+h:(\*|\d+);w:(\*|\d+)/gi, (_,hVal,wVal)=>
        `.qts-cell${hVal==="*"?"":".h"+hVal}${wVal==="*"?"":".w"+wVal}`
      );
      document.head.appendChild(styleEl);
    }

    qtsEl.replaceWith(grid);
  }

  document.addEventListener("DOMContentLoaded",()=>{
    document.querySelectorAll("qts").forEach(parseQTS);
  });

})();
</script>

</body>
</html>
